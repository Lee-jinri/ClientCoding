<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
		<title>Insert title here</title>
		
		<!-- 모바일 웹 페이지 설정 -->
		<link rel="shortcut icon" href="../image/icon.png" />
		<link rel="apple-touch-icon" href="../image/icon.png" />	
	
		<!--[if lt IE 9]>
		<script src="../js/html5shiv.js"></script>
		<![endif]-->
		
		<!-- jQuery 파일을 다운받아 로드하는 방법 -->
		<!-- <script type="text/javascript" src="../js/jquery-1.12.4.min.js"></script> -->
		<script type="text/javascript" src="../js/jquery-3.6.0.min.js"></script>
		
		<!-- CDN(Content Delivery Network: 콘텐츠 전송 네트워크)을 이용하여 로드하는 방법 -->
		<!-- <script src="https://code.jquery.com/jquery-3.6.0min.js"></script> -->
		<link rel="stylesheet" type="text/css" href="../css/reset.css"/>
		<link rel="stylesheet" type="text/css" href="../css/common.css"/>
		
		<!-- 사용자 스크립트 -->
		<script type="text/javascript">
			$(function(){
				// book.json이 전달할 파라미터값이 없으므로 2개만 쓴거임
			/*	$.get('../ajax/json/book.json',function(data){
					let book = data.books.book;
				
					for (let i=0; i<book.length; i++){
						let title = book[i].title;
						let author = book[i].author;
						let price = book[i].price;
						
						let li = $("<li>").html( title + ", " + author + ", " + price);
						$("#view").append(li);
					}
				}),fail(function(xhr, status, errorThrown){
					$("#result").html("오류가 발생했습니다.<br />").append("오류: " + errorThrown + "<br />").append("상태: " + status);
				}); */
			
				// 응답받을 문서 타입이 JSON일 때 getJSON 사용
				$.getJSON('../ajax/json/book.json',function(data){
					// json 데이터 접근은 this 객체로 가능.
					let book = data.books.book;
					
					$(book).each(function(){
					
						let title = this.title;
						let author = this.author;
						let price = this.price;
					
						let li = $("<li>").html (title  + ", " + author + ", " + price);
						$('#view').append(li);
					});
				}).fail (function(xhr, status, errorThrown){
					$("#result").html("오류가 발생했습니다.<br />").append("오류명: " + errorThrown +"<br />").append("상태: " + status);
				})
			}) // 끝
			
		</script>	
	</head>
	
	<body>
		<h1 class="title">$.get / $getJSON() 함수를 이요한 JSON 데이터 읽기</h1>
		<div class="console" id="result">
			<ol id="view"></ol>
		</div>
	</body>
</html>